<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <title>Vulhub Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="/static/style.css" rel="stylesheet" />
  <style>
    /* 若無 style.css，也有基本樣式 */
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, "Helvetica Neue", Arial; margin:0; background:linear-gradient(180deg,#6f75d1,#6a59c6); color:#222; }
    .container { max-width: 1200px; margin: 32px auto; padding: 0 16px; }
    .header { background:#fff; border-radius:16px; padding:24px 28px; display:flex; align-items:center; justify-content:space-between; box-shadow: 0 8px 24px rgba(0,0,0,.08); }
    .title { font-size: 36px; font-weight: 800; display:flex; align-items:center; gap:12px; }
    .toolbar { margin: 24px 0; background:#fff; border-radius:16px; padding:16px; display:flex; gap:12px; align-items:center; box-shadow: 0 8px 24px rgba(0,0,0,.08); flex-wrap:wrap; }
    .toolbar input, .toolbar select { height:44px; padding:0 12px; border:1px solid #e5e7eb; border-radius:10px; outline:0; }
    .toolbar .checkbox { display:flex; align-items:center; gap:8px; padding:8px 10px; background:#f3f4f6; border-radius:10px; }
    .btn { height:40px; padding:0 14px; border-radius:10px; border:0; cursor:pointer; background:#eef2ff; }
    .btn-primary { background:#6366f1; color:#fff; }
    .btn-success { background:#10b981; color:#fff; }
    .btn-danger { background:#ef4444; color:#fff; }
    .env-list { margin-top:12px; }
    .env-card { background:#fff; border-radius:14px; padding:14px; margin-bottom:12px; box-shadow: 0 6px 18px rgba(0,0,0,.08); }
    .env-header { display:flex; align-items:center; justify-content:space-between; gap:8px; }
    .env-title { font-size:18px; font-weight:700; }
    .env-status { font-size:12px; padding:4px 8px; border-radius:999px; background:#e5e7eb; }
    .env-status.running { background:#dcfce7; color:#166534; }
    .env-status.stopped { background:#fee2e2; color:#991b1b; }
    .env-meta { display:flex; gap:8px; flex-wrap:wrap; margin:8px 0; }
    .tag { background:#f3f4f6; padding:4px 8px; border-radius:999px; font-size:12px; }
    .tag-exploit { background:#fde68a; }
    .tag-port { background:#dbeafe; }
    .tag-docker { background:#d1fae5; color:#065f46; }
    .env-actions { display:flex; gap:8px; flex-wrap:wrap; }
    .empty { color:#fff; text-align:center; padding:40px 0; }
    .stats { display:flex; gap:12px; margin-top:16px; }
    .stat-item { background:#fff; border-radius:14px; padding:12px 16px; text-align:center; min-width:120px; box-shadow: 0 6px 18px rgba(0,0,0,.08); }
    .stat-value { font-size:28px; font-weight:800; }
    .stat-label { font-size:12px; color:#6b7280; }
    .pagination { display:flex; justify-content:center; gap:8px; margin:16px 0; }
    .btn-page { padding:8px 12px; border-radius:8px; border:0; background:#fff; box-shadow: 0 4px 12px rgba(0,0,0,.08); }
    .btn-page.active { background:#6366f1; color:#fff; }
    .btn-page.disabled { opacity:.5; cursor:not-allowed; }
    .page-ellipsis { color:#fff; padding:8px; }

    /* loading */
    #loading { position:fixed; inset:0; display:none; align-items:center; justify-content:center; backdrop-filter: blur(2px); }
    .loading-box { background:#fff; padding:16px 20px; border-radius:12px; box-shadow: 0 10px 30px rgba(0,0,0,.15); }

    .notification { position: fixed; right: 16px; top: -80px; background:#111827; color:#fff; padding:10px 14px; border-radius:10px; opacity:0; transition: all .3s; }
    .notification.show { top: 16px; opacity: 1; }
    .notification-info { background:#3b82f6; }
    .notification-warning { background:#f59e0b; }
    .notification-error { background:#ef4444; }
    .notification-success { background:#10b981; }

    /* modal */
    #detailModal, #progressModal { position:fixed; inset:0; display:none; background:rgba(0,0,0,.35); }
    .modal-content { background:#fff; max-width: 980px; margin: 60px auto; padding: 16px; border-radius: 12px; }
    .code-block { background:#0f172a; color:#e5e7eb; padding:12px; border-radius:8px; overflow:auto; }
    .screenshot { max-width:100%; border-radius:8px; margin:6px 0; }
    #progressLog { height: 240px; width:100%; background:#0f172a; color:#e5e7eb; padding:10px; border-radius:8px; overflow:auto; white-space:pre; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="title">🐳 Vulhub Manager</div>
      <button id="btnRescan" class="btn btn-primary">🔄 重新掃描</button>
    </div>

    <div class="toolbar">
      <input id="searchInput" type="text" placeholder="搜尋 CVE、名稱或分類..." style="flex:1 1 500px" />
      <select id="categoryFilter">
        <option value="">所有分類</option>
      </select>

      <label class="checkbox">
        <input id="exploitFilter" type="checkbox" />
        僅顯示有 Exploit
      </label>

      <label class="checkbox">
        <input id="runningFilter" type="checkbox" />
        僅顯示運行中
      </label>

      <label class="checkbox">
        <input id="downloadedFilter" type="checkbox" />
        僅顯示已有映像
      </label>
    </div>

    <div id="stats" class="stats"></div>

    <div class="env-list" id="envList"></div>
    <div id="pagination" class="pagination"></div>
  </div>

  <!-- 詳情 Modal -->
  <div id="detailModal">
    <div class="modal-content">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 style="margin:0;">環境詳情</h3>
        <button class="btn" onclick="closeModal()">關閉</button>
      </div>
      <div id="modalContent" style="margin-top:10px;"></div>
    </div>
  </div>

  <!-- 下載進度 Modal -->
  <div id="progressModal">
    <div class="modal-content">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 style="margin:0;">下載映像</h3>
        <button class="btn" onclick="hideProgressModal()">關閉</button>
      </div>
      <pre id="progressLog"></pre>
    </div>
  </div>

  <!-- Loading -->
  <div id="loading">
    <div class="loading-box">處理中...</div>
  </div>

  <script src="/static/script.js"></script>
</body>
</html>